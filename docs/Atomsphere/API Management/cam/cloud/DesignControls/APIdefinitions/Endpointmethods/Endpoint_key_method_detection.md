---
sidebar_position: 4
---

# Endpoint Key and Method Detection

<head>
  <meta name="guidename" content="API Management"/>
  <meta name="context" content="GUID-0a22a7ac-aec9-4409-a270-17246bca59f9"/>
</head>

The **Endpoint Key & Method Detection** page allows you set the key and method details related to an endpoint. You can select parameters such as the endpoint type, supported HTTP methods, method location, and Developer API key location. 

The following table describes the fields on the **Endpoint Key & Method Detection** page. 

|**Field** |**Description** |
| ---- | ---- |
|Endpoint Type|<p>The endpoint type determines the protocol to be used by a customer while making API calls. If the endpoint types, other than the one specified, are used while making a call to this endpoint, the Traffic Manager rejects the call. Special functionality can be included with the SOAP selection. When selected, a GET call to a WSDL will be proxied through the Traffic Manager without an API key. The following are the available Endpoint types: </p><p>- REST/Query-style </p><p>- XML-RPC </p><p>- JSON-RPC </p><p>- SOAP </p><p>- Other: Any custom protocol used must be handled as a customization. </p><p>:::note</p><p>Based on the endpoint type selected, options on the page may be enabled or disabled. For more information, see [Key and Method Detection Matrix](Key_and_method_detection_matrix.md).</p><p>::: </p>|
|Supported Http Methods|<p>Select from available HTTP methods that are supported by the endpoint. Selected HTTP methods can be used to make calls to the endpoint. You can select more than one HTTP methods. </p><p>:::note</p><p>If **TIBCO Cloud Mesh** is used for the endpoint, the supported HTTP methods are automatically selected according to the Swagger definitions returned. </p><p>:::</p><p>:::note</p><p>Based on the endpoint type selected, options on the page may be enabled or disabled. For more information, see [Key and Method Detection Matrix](Key_and_method_detection_matrix.md). </p>|
|Method Location|<p>Location of the method in the API call request. Based on the options selected here, the traffic manager locates the method. </p><p>:::note</p><p>Based on the endpoint type selected, options on the page may be enabled or disabled. For more information, see [Key and Method Detection Matrix](Key_and_method_detection_matrix.md).</p><p>:::</p>|
|Method Location Identifier|<p>Identifier used by Traffic Manager to identify a method in the following method sources: </p><p>- The parameter ID of the method within the URL for GET method API calls. </p><p>- Location of the method within the body for POST method API calls. </p><p>- Location of the method within the actual URL path of an API call for Split Path, entered as space-delimited numbers representing the position of the element in a 0 index based array. For example, if the inbound call path is a/b/c/d, and this box contains 0 2, the method name a c will be logged. These position numbers need not be in order, and if a position number is greater than the number of elements received in the path, it will be ignored. </p><p>- The XML path of the method within the SOAP or XML-RPC. </p>|
|Request Authentication Type|<p>Authentication type or algorithms that is used for an endpoint. Depending on the authentication type you select, the following fields are displayed on the page. One of the following options can be selected for the API endpoint authentication mechanism: </p><p>- API Key only (default) </p><p>- Key + Secret + Timestamp Hash (MD5)</p><p>- Key + Secret + Timestamp Hash (SHA-256)</p><p>- OAuth 2.0</p><p>- Custom: Custom authentication mechanism can be used after consulting API Management Support to have a customer authentication adapter created. </p><p>:::note</p><p>When High Security Secret Management (HSSM) is enabled, the only option available for the endpoint authentication type is Secure Hash (SHA-256). HSSM is only available for Boomi Cloudâ„¢ API Management - Local Edition 4.0 and above.</p><p>:::</p><p>A sample Traffic Manager Call for an HSSM-enabled endpoint will look like the following: </p><p>```curl -H 'Authorization: Basic <ML Auth Code>' -H 'Host: <Public Hostname>' 'http://<ML Machine Hostname/IP address>/<EndpointPath> api_key=<ApiKey>&sig='$(php -r 'echo hash_hmac('sha256', "<Api Key>", "<Secret>");')'&timestamp='$(php -r 'echo hash_hmac('sha256', time(), "<Api Key>");')'';```</p><p>In the above call, the customer will have to replace the `<Api Key>` and `<Secret>` with their key and secret. For more information on generating a package key when HSSM is enabled, see [Generating Package Key Secrets when High Security Secret Management (HSSM) is Enabled](../../../ManageControls/Packagekeys/Creatingpackagekeys/Generating_package_key_secrets_when_high_security_secret_management_hss.md). </p>|
|Developer's API Key Location|<p>Select one or more of the followings options where the Traffic Manager must look for a developer's API key: </p><p>- Path</p><p>- Parameters</p><p>- Header</p><p>- Request Body</p><p>- Custom</p><p>:::note</p><p>Only Parameters and Request Body can be chosen at the same time.</p><p>::: </p>|
|OAuth Grant Types|<p>The grant types that you want to support. Grant type is an authorization type that is necessary to obtain an access token. The following grant types can be selected in the OAuth Grant Type section: </p><p>- **Authorization Code:** Consists of two requests and two responses. The first request is to get the authorization code generated by authorization server. The code is then sent in the second request to get the access token. </p><p>- **Implicit:** Issues an access token directly on receiving the authorization request. The client is not authenticated by the authorization server in this grant type. The client can only send the client ID. </p><p>- **Password:** Issues an access token, using the resource owner password credentials. After providing the resource owner credentials, the access to client application is provided. This type must be used only when there is a trust between the resource owner and the client. </p><p>- **Client Credentials:** Issues access token by using client credentials where the client requests access to secured resources or other resource owners. </p>|
|Key Field Identifier|<p>Identifier used by Traffic Manager to identify an API Key in the following key sources: </p><p>- The name field that designates the key in API call. </p><p>- Location of the API Key in the request path. </p><p>:::note</p><p>**The Key Field Identifier** is available for all values of **Request Authentication Type**, except OAuth, which then requires a signature. The default signature field identifier is static, and not configurable by the API Control Center user, and is different depending on the selection made in the **Developer's API Key** Location options: </p><p>- When **Parameters** is selected for **Developer's API Key** Location, API Management is expecting the signature to be `sig=SIGNATURE\_VALUE` in the parameters. </p><p>- When **Header** is selected for **Developer's API Key** Location, API Management is expecting the signature to be `x-signature:SIGNATURE VALUE` in the header. </p><p>The default value is api_key but can be changed as needed to tell API Management how to identify the field where the API/Package Key will be included in requests (for example, `apikey` or `passkey` or `x-apikey` as the last value is common for header authentication type). In the case of a Key Location or Path, this can also be a space-delimited set of numbers designating the locations in the request past that should be recorded as the API Key.</p><p>::: </p><p>To generate the hash for **Key+Secret+Timestamp Hash**,refer to the following:</p><p>Invoking an **API** sometimes needs a Signature to be passed as part of the request.</p><p>Signature is **MD5** or **SHA256** hashed and is a concatenation of -</p><p>- **Client ID**</p><p>- **Client Secret**</p><p>- **Epoch time**</p><p>Generating Signature in **Postman**, the 'sig' query parameter is generated in Postman through Pre-request Script. The `{{signature}}` element used in Postman URL, comes from the global variable defined in Pre-request script.</p><p>:::note</p><p>- That a +/-5min window is allowed for the **timestamp** validity in the signature</p><p>- that the location of signature is not tied to the **API Key** location:</p><p>Irrespective of **API Key** Location, provide the signature in query-params or in headers.</p><p>- if in query parameters, the name should be `sig`</p><p>- if in headers, the name should be `x-signature`</p><p>:::</p>|
|Custom Request Authentication Adapter|A class file with a custom logic can be entered. The file is used by the Traffic Manager to perform OAuth authorization. Custom authentication mechanism can be used after consulting API Management Support to have a customer authentication adapter created. On selection of **Custom as Request Authentication Type**, this option is visible. |

## Constructing Authentication Credentials Matrices

The following matrix provides information on how to construct specific authentication credentials for **API Key** or **Key + Secret + Timestamp Hash (MD5) or Key + Secret + Timestamp Hash (SHA-256)**. 

|**If Request Authentication Type is:** |**And if Developer's API Key Location is:** |**Then for Key Field Identifier:** |
| ----- | ---- | ---- |
|API Key or Key + Secret + Timestamp Hash (MD5) or Key + Secret + Timestamp Hash (SHA-256)|Path|Set a path location (for API Key) or multiple path locations in the **Key Field Identifier** field. |
|API Key or Key + Secret + Timestamp Hash (MD5) or Key + Secret + Timestamp Hash (SHA-256)|Parameters|Leave the default value of api\_key in the **Key Field Identifier** field. |
|API Key or Key + Secret + Timestamp Hash (MD5) or Key + Secret + Timestamp Hash (SHA-256)|Header|Leave the default value of api\_key in the **Key Field Identifier** field. |
|API Key or Key + Secret + Timestamp Hash (MD5) or Key + Secret + Timestamp Hash (SHA-256)|Request Body|<p>Leave the default value of api\_key in the **Key Field Identifier** field. </p><p>:::note</p><p>API Management expects the body to be x-www-form-urlencoded for API Management to be able to recognize the API Key.</p><p>::: </p>|
|API Key or Key + Secret + Timestamp Hash (MD5) or Key + Secret + Timestamp Hash (SHA-256)|<p>Custom</p><p>:::note</p><p>For proper authentication formatting in API requests, refer to the documentation provided with the custom authentication adapter.</p><p>::: </p>|Not applicable. |

The following matrix provides information on how to construct specific authentication credentials for OAuth 2.0. These examples assume the user constructs the OAuth Token Request using the Package Key as the "client\_id" and the Secret as the "client\_secret" using grant\_type of client credentials. 

|**If Request Authentication Type is:** |**And if OAuth Grant Types is:** |**Then:** |
| :-: | :-: | :-: |
|OAuth 2.0|**Client Credentials** where the user wants to include the OAuth Client Credentials in the Request Body for API Management the Get Token request. |API Management expects the body to be x-www-form-urlencoded for API Management to be able to recognize the OAuth credentials. |
|OAuth 2.0|**Client Credentials** where the user wants to include the OAuth Client Credentials in the Header and the grant\_type in the body for the Get Token request. |API Management expects the body to be x-www-form-urlencoded for API Management to be able to recognize the OAuth credentials. |
|OAuth 2.0|Client Credentials where the user wants to make an API call using an access token. |The API call should have ACCESS TOKEN in an Authorization header as "Authorization: Bearer ACCESS\_TOKEN". |

